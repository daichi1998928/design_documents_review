# ER図2
# 提出２回目
## 全体
- 配送先テーブルがない。
- 入荷テーブルがない。
- 計算で出せる値はデータベースには保存しない。（同時計算によるエラーを防ぐため）

## 管理者
- PKがない。
- リレーションがあるのにFKがない。
- エンドユーザ、商品に対してリレーションは必要か。

## エンドユーザ
- PKはユーザーIDではなく、エンドユーザID
- 名カラムがない。

## 商品
- ディスク枚数は含まれているディスクの数から計算できるのではないか。
- 在庫数カラムとあるが、この値は（入荷数）ー（売上枚数）で算出できるため不要。
- 発売日カラムがない。
- ディスクIDはいらない。

## ジャンル、レーベル
- テーブルと同じ名前のカラムは作らない。（ジャンル名、レーベル名などにする）

## ディスク
- 商品とディスクのカーディナリティが逆。（一つの商品に対して複数のディスクがあるため）
- FKに商品IDが必要。
- トラックNo.とは何か。（曲順を管理するものなら曲名テーブルの方に入れる）

## 曲名
- ディスクと曲名のカーディナリティが逆。（一つのディスクに対して複数の曲名があるため）
- 曲順はどのように管理するのか。

## カートアイテム
- PKがない。
- 小計金額は計算で出せるため不要。

## 購入
- テーブル名は管理者視点の命名にする。（受注テーブルなど）
- 購入日は登録日から出せるのではないか。
- 消費税が変わった場合も考慮して消費税カラムがあっても良い。

## 購入詳細
- テーブル名は管理者視点の命名にする。（受注詳細テーブルなど）
- 購入と購入詳細のカーディナリティが逆。（一つの注文に対して複数の注文商品があるため）
- 商品情報がない。

# 提出１回目
## 全体
- 管理者とディスクだけ登録日と更新日の順番が逆になっているのが気になる。
- 配送先テーブルがない。
- 入荷テーブルがない。
- 計算で出せる値はデータベースには保存しない。（同時計算によるエラーを防ぐため）

## 管理者
- PKがない。
- リレーションがあるのにFKがない。
- エンドユーザ、商品に対してリレーションは必要か。

## エンドユーザ
- 名カラムがない。
- 配送先は複数持つことができるようにテーブルを分ける。

## 商品
- ディスク枚数は含まれているディスクの数から計算できるのではないか。
- 在庫数カラムとあるが、この値は（入荷数）ー（売上枚数）で算出できるため不要。 

## 曲名
- ジャンルID、アーティストIDはこちらに持たせる。（曲ごとに異なる場合があるため）
- 曲の長さを入れるカラムがあっても良い。

## カートアイテム
- PKがない。
- 小計金額は計算で出せるため不要。

## 購入
- 支払い合計は計算で出せるため不要。
- 購入日は登録日から出せるのではないか。
- 消費税が変わった場合も考慮して消費税カラムがあっても良い。

## 購入詳細
- 商品情報がない。

# 注意
* マークダウン形式で記入してください。
* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。

**研修担当レビュー**
<font color="Red">再提出の際はこのレビューを残しておいてください。</font>

## 全体
- > 管理者とディスクだけ登録日と更新日の順番が逆になっているのが気になる。
  こちらの指摘は不要です

## エンドユーザー
- pkの名前に問題はありませんか？
- > 配送先は複数持つことができるようにテーブルを分ける。
  こちらの指摘は`全体`で指摘しているため不要です

## 購入
- > 支払い合計は計算で出せるため不要。
  とありますが、購入履歴一覧などで購入詳細は表示しないかと思いますが、
  支払い合計カラムがない場合合計金額を算出するために全ての購入履歴に関して紐づいた購入詳細のデータを全件取得する必要が出てきます。
  支払い合計カラムがある場合はその分のdbへのリクエストが無くなるのでパフォーマンス向上のためにこちらのカラムは必要になります。
- テーブル名は管理者視点の命名にしてください(受注テーブルなど)

## 購入詳細
- テーブル名は管理者視点の命名にしてください(受注テーブルなど)
- 購入テーブルと購入詳細テーブルのカーディナリティは問題ありませんか？

## ジャンル、レーベル
- カラムにテーブル名と同じカラムがありますが問題ありませんか？
- ディスクidは必要でしょうか？
- 発売日カラムがありません

## ディスク
- 商品とのリレーションは問題ありませんか？
- トラックno.カラムがありますが、問題ありませんか？

## 曲
- > ジャンルid、アーティストidはこちらに持たせる。（曲ごとに異なる場合があるため）
  ジャンル、アーティストは曲毎ではなく、アルバム毎に持つ形での設計で良いのでこちらの指摘は変えてください
- > 曲の長さを入れるカラムがあっても良い。
  要件にないのでこちらの指摘は不要です
- ディスクとのリレーションは問題ありませんか？
- 曲順はどのように管理しますか？
